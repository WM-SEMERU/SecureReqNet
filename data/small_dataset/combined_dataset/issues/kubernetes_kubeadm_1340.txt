kubeadm init is failing to verify CA in admin.conf


Is this a BUG REPORT or FEATURE REQUEST?
BUG REPORT
Versions
kubeadm version: kubeadm version: &version.Info{Major:"1", Minor:"13", GitVersion:"v1.13.1", GitCommit:"eec55b9ba98609a46fee712359c7b5b365bdd920", GitTreeState:"clean", BuildDate:"2018-12-13T10:36:44Z", GoVersion:"go1.11.2", Compiler:"gc", Platform:"linux/amd64"}
Environment:

Kubernetes version (use kubectl version):
Cloud provider or hardware configuration: baremetal vm
OS : centos 7.6 1810
Kernel (e.g. uname -a): Linux k8sm1.dev 3.10.0-957.1.3.el7.x86_64 #1 SMP Thu Nov 29 14:49:43 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux

What happened?
While trying to experiment with kubeadm setup with CA, certificates and admin.conf generated on my own, kubeadm init  fails with error
kubeadm init --config ....
...
error execution phase kubeconfig/admin: a kubeconfig file "/etc/kubernetes/admin.conf" exists already but has got the wrong CA cert

Only difference between my and kubeadm generated admin.conf is that kubeadm is somehow adds new line to ca.crts content (probably during file open) and creating base64 string out of that output.
My ca.crt has no new line in the end.
So here are examples:
ansible generated string in kubeconfig
certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUQyRENDQXNDZ0F3SUJBZ0lVUHpxc0xobjhZTFE0WFhRSDlYcW5mYnpvVCt3d0RRWUpLb1pJaHZjTkFRRUwKQlFBd2dZTXhDekFKQmdOVkJBWVRBa2RGTVNBd0hnWURWUVFLRXhkRVpYWmxiRzl3YldWdWRDQkZiblpwY205dQpiV1Z1ZERFb01DWUdBMVVFQ3hNZlJHVjJaV3h2Y0cxbGJuUWdSVzUyYVhKdmJtMWxiblFnVW05dmRDQkRRVEVvCk1DWUdBMVVFQXhNZlJHVjJaV3h2Y0cxbGJuUWdSVzUyYVhKdmJtMWxiblFnVW05dmRDQkRRVEFlRncweE9EQXgKTURnd05qRTJNREJhRncweU9EQXhNRFl3TmpFMk1EQmFNSUdETVFzd0NRWURWUVFHRXdKSFJURWdNQjRHQTFVRQpDaE1YUkdWMlpXeHZjRzFsYm5RZ1JXNTJhWEp2Ym0xbGJuUXhLREFtQmdOVkJBc1RIMFJsZG1Wc2IzQnRaVzUwCklFVnVkbWx5YjI1dFpXNTBJRkp2YjNRZ1EwRXhLREFtQmdOVkJBTVRIMFJsZG1Wc2IzQnRaVzUwSUVWdWRtbHkKYjI1dFpXNTBJRkp2YjNRZ1EwRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFEQgphRUZRV1ZReU4zQzhrVFlKTmVnYk9vVFp2dm9wVDNyTG5BOUQ4ZTcvWUZGaXhGc0VJU1JIYzhSOUFKL1YxWnZOCk1MOGdaTGFuek8zR2RrYVgydXYwWGhjajJacDhJeUFaNStRdm1CSy9RMEYwNGpQQUFGUkpmMERoUkxzRDFIT0EKQzhzcGZ5Yi9UQ2FuK1VTU1ExVE9ERVpJNjlzbkNEdlZXZzA5M2UwQjNBOCtSZXNJSTRmK1Q2T0Q2eXRjZzRScAprTmJMZmNjanhBbWRXWWR1bjE4NTQ2eFBFM2plL2U5QXo3SVhIbDdIdnVyZTZtOXJwNW9sV1dMNWFYRDE4NG94Ci9BWjNIY0FQMVdJWXlhTFppOWZEVE5Jdk1ydGdnWjhBQm9RaGZoekxEcUZYTnZ5eTRaZjZseDNwY3ZwNDk1SEQKN28rYlFNbkJNeXlHbzMva2ZrcjVBZ01CQUFHalFqQkFNQTRHQTFVZER3RUIvd1FFQXdJQkJqQVBCZ05WSFJNQgpBZjhFQlRBREFRSC9NQjBHQTFVZERnUVdCQlFkeWUwNDlyOUxuVnUySUpjdGZnaDZFUGVIempBTkJna3Foa2lHCjl3MEJBUXNGQUFPQ0FRRUFjMkoydS9XclplQ2Y5eFZSY0g0NHRuSWE4R2FuRGVONHNLaFBkWCtiVkVZeHJ4b1YKTnAvRTlySCtTOHA0TEJpSUZtT3l1ZUZGNVBhRGczL3c5eU9lUDkvd3JwTlU4dGFhbjV0NDF0MFVYMkl2Nk15bwpUcDA5eVpvTHMyVVRnMkdyMDJGbHREQmtGczcrYzg4KzRWdk8rVEVtcXRxNUtIT3N2VFpha3h5UmJrRGMxOHd0ClB6MXdxQUFuOTdEY0ZvTnpLSnZ4RG5FK2RuQzJsZFBMUWp6dU9pVkFTU2lzaTlFbXc3dndHSjNIU21KcXY4N2QKWDBiSER5RVlGY0NENnd2SWhIV0pCdml6YVNaVjlsYmJ1OG1pK2RBeGZuQ2Y4aHpTTytZWDVDTk9weWZaUXROcwpmdUszeVczcWZrWXNpSnZSbTB2UnpSSE45b2pjZFJaVnVWVkFndz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0=

kubeadm generated string:
certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUQyRENDQXNDZ0F3SUJBZ0lVUHpxc0xobjhZTFE0WFhRSDlYcW5mYnpvVCt3d0RRWUpLb1pJaHZjTkFRRUwKQlFBd2dZTXhDekFKQmdOVkJBWVRBa2RGTVNBd0hnWURWUVFLRXhkRVpYWmxiRzl3YldWdWRDQkZiblpwY205dQpiV1Z1ZERFb01DWUdBMVVFQ3hNZlJHVjJaV3h2Y0cxbGJuUWdSVzUyYVhKdmJtMWxiblFnVW05dmRDQkRRVEVvCk1DWUdBMVVFQXhNZlJHVjJaV3h2Y0cxbGJuUWdSVzUyYVhKdmJtMWxiblFnVW05dmRDQkRRVEFlRncweE9EQXgKTURnd05qRTJNREJhRncweU9EQXhNRFl3TmpFMk1EQmFNSUdETVFzd0NRWURWUVFHRXdKSFJURWdNQjRHQTFVRQpDaE1YUkdWMlpXeHZjRzFsYm5RZ1JXNTJhWEp2Ym0xbGJuUXhLREFtQmdOVkJBc1RIMFJsZG1Wc2IzQnRaVzUwCklFVnVkbWx5YjI1dFpXNTBJRkp2YjNRZ1EwRXhLREFtQmdOVkJBTVRIMFJsZG1Wc2IzQnRaVzUwSUVWdWRtbHkKYjI1dFpXNTBJRkp2YjNRZ1EwRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFEQgphRUZRV1ZReU4zQzhrVFlKTmVnYk9vVFp2dm9wVDNyTG5BOUQ4ZTcvWUZGaXhGc0VJU1JIYzhSOUFKL1YxWnZOCk1MOGdaTGFuek8zR2RrYVgydXYwWGhjajJacDhJeUFaNStRdm1CSy9RMEYwNGpQQUFGUkpmMERoUkxzRDFIT0EKQzhzcGZ5Yi9UQ2FuK1VTU1ExVE9ERVpJNjlzbkNEdlZXZzA5M2UwQjNBOCtSZXNJSTRmK1Q2T0Q2eXRjZzRScAprTmJMZmNjanhBbWRXWWR1bjE4NTQ2eFBFM2plL2U5QXo3SVhIbDdIdnVyZTZtOXJwNW9sV1dMNWFYRDE4NG94Ci9BWjNIY0FQMVdJWXlhTFppOWZEVE5Jdk1ydGdnWjhBQm9RaGZoekxEcUZYTnZ5eTRaZjZseDNwY3ZwNDk1SEQKN28rYlFNbkJNeXlHbzMva2ZrcjVBZ01CQUFHalFqQkFNQTRHQTFVZER3RUIvd1FFQXdJQkJqQVBCZ05WSFJNQgpBZjhFQlRBREFRSC9NQjBHQTFVZERnUVdCQlFkeWUwNDlyOUxuVnUySUpjdGZnaDZFUGVIempBTkJna3Foa2lHCjl3MEJBUXNGQUFPQ0FRRUFjMkoydS9XclplQ2Y5eFZSY0g0NHRuSWE4R2FuRGVONHNLaFBkWCtiVkVZeHJ4b1YKTnAvRTlySCtTOHA0TEJpSUZtT3l1ZUZGNVBhRGczL3c5eU9lUDkvd3JwTlU4dGFhbjV0NDF0MFVYMkl2Nk15bwpUcDA5eVpvTHMyVVRnMkdyMDJGbHREQmtGczcrYzg4KzRWdk8rVEVtcXRxNUtIT3N2VFpha3h5UmJrRGMxOHd0ClB6MXdxQUFuOTdEY0ZvTnpLSnZ4RG5FK2RuQzJsZFBMUWp6dU9pVkFTU2lzaTlFbXc3dndHSjNIU21KcXY4N2QKWDBiSER5RVlGY0NENnd2SWhIV0pCdml6YVNaVjlsYmJ1OG1pK2RBeGZuQ2Y4aHpTTytZWDVDTk9weWZaUXROcwpmdUszeVczcWZrWXNpSnZSbTB2UnpSSE45b2pjZFJaVnVWVkFndz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K

What you expected to happen?
Continue working normally
How to reproduce it (as minimally and precisely as possible)?
Use your own CA for kubeadm setup. generate all required certs plus
generate admin.conf kubeconfig on your own
and finally try to run kubeadm init
Anything else we need to know?
generating my files and bootstrapping server with ansible. nothing fancy, using {{ ca_cert | b64encode }}
So solution would be: do not add new line while opening file and generating base64 string out of that content. trim whitespaces :)
Removing "custom" admin.conf; Allowing kubeadm to generate own admin.conf works just fine.
Removing kubeadms admin.conf afteer initialization and putting your admin.conf breaks nothing.
{{ (ca_cert + '\n') | b64encode }} that "fix" works fine for now
