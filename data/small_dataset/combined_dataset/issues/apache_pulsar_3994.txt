fix bug when updating function running in effectively-once


Motivation
Master issue: #3993
