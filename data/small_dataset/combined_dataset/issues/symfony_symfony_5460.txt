[2.1] Validator UserPassword fails after yesterdays update


The validator (http://symfony.com/doc/master/reference/constraints/UserPassword.html) fails after updating to 2.1.
add('current_password', 'password', array(
            'label' => 'form.current_password',
            'translation_domain' => 'FOSUserBundle',
            'mapped' => false,
            'constraints' => new UserPassword(), <<<<< fails
        ));
        $builder->add('new', 'repeated', array(
            'type' => 'password',
            'options' => array('translation_domain' => 'FOSUserBundle'),
            'first_options' => array('label' => 'form.new_password'),
            'second_options' => array('label' => 'form.new_password_confirmation'),
        ));
    }

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'Cmf\UserBundle\Entity\User',
        'intention'  => 'change_password',
    ));
}

public function getName()
{
    return 'fos_user_change_password';
}
```

}

error given:

[{"message":"The User must extend 
UserInterface","class":"Symfony\Component\Validator\Exception\ConstraintDefinitionException","trace":[{"namespace":"","short_class":"","class":"","type":"","function":"","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Security\Core\Validator\Constraint\UserPasswordValidator.php","line":37,"args":[]},{"namespace":"Symfony\Component\Security\Core\Validator\Constraint","short_class":"UserPasswordValidator","class":"Symfony\Component\Security\Core\Validator\Constraint\UserPasswordValidator","type":"->","function":"validate","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Validator\GraphWalker.php","line":182,"args":[["string","password"],["object","Symfony\Component\Security\Core\Validator\Constraint\UserPassword"]]},{"namespace":"Symfony\Component\Validator","short_class":"GraphWalker","class":"Symfony\Component\Validator\GraphWalker","type":"->","function":"walkConstraint","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Form\Extension\Validator\Constraints\FormValidator.php","line":75,"args":[["object","Symfony\Component\Security\Core\Validator\Constraint\UserPassword"],["string","password"],["string","Default"],["string","children[current_password].data"]]},{"namespace":"Symfony\Component\Form\Extension\Validator\Constraints","short_class":"FormValidator","class":"Symfony\Component\Form\Extension\Validator\Constraints\FormValidator","type":"->","function":"validate","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Validator\GraphWalker.php","line":182,"args":[["object","Symfony\Component\Form\Form"],["object","Symfony\Component\Form\Extension\Validator\Constraints\Form"]]},{"namespace":"Symfony\Component\Validator","short_class":"GraphWalker","class":"Symfony\Component\Validator\GraphWalker","type":"->","function":"walkConstraint","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Validator\GraphWalker.php","line":105,"args":[["object","Symfony\Component\Form\Extension\Validator\Constraints\Form"],["object","Symfony\Component\Form\Form"],["string","Default"],["string","children[current_password]"],["string","Symfony\Component\Form\Form"]]},{"namespace":"Symfony\Component\Validator","short_class":"GraphWalker","class":"Symfony\Component\Validator\GraphWalker","type":"->","function":"walkObjectForGroup","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Validator\GraphWalker.php","line":85,"args":[["object","Symfony\Component\Validator\Mapping\ClassMetadata"],["object","Symfony\Component\Form\Form"],["string","Default"],["string","children[current_password]"]]},{"namespace":"Symfony\Component\Validator","short_class":"GraphWalker","class":"Symfony\Component\Validator\GraphWalker","type":"->","function":"walkObject","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Validator\GraphWalker.php","line":163,"args":[["object","Symfony\Component\Validator\Mapping\ClassMetadata"],["object","Symfony\Component\Form\Form"],["string","Default"],["string","children[current_password]"]]},{"namespace":"Symfony\Component\Validator","short_class":"GraphWalker","class":"Symfony\Component\Validator\GraphWalker","type":"->","function":"walkReference","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Validator\GraphWalker.php","line":156,"args":[["object","Symfony\Component\Form\Form"],["string","Default"],["string","children[current_password]"],["boolean",false],["boolean",false]]},{"namespace":"Symfony\Component\Validator","short_class":"GraphWalker","class":"Symfony\Component\Validator\GraphWalker","type":"->","function":"walkReference","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Validator\GraphWalker.php","line":140,"args":[["array",{"current_password":["object","Symfony\Component\Form\Form"],"new":["object","Symfony\Component\Form\Form"]}],["string","Default"],["string","children"],["boolean",true],["boolean",false]]},{"namespace":"Symfony\Component\Validator","short_class":"GraphWalker","class":"Symfony\Component\Validator\GraphWalker","type":"->","function":"walkMember","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Validator\GraphWalker.php","line":119,"args":[["object","Symfony\Component\Validator\Mapping\PropertyMetadata"],["array",{"current_password":["object","Symfony\Component\Form\Form"],"new":["object","Symfony\Component\Form\Form"]}],["string","Default"],["string","children"],["null",null]]},{"namespace":"Symfony\Component\Validator","short_class":"GraphWalker","class":"Symfony\Component\Validator\GraphWalker","type":"->","function":"walkProperty","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Validator\GraphWalker.php","line":111,"args":[["object","Symfony\Component\Validator\Mapping\ClassMetadata"],["string","children"],["object","Symfony\Component\Form\Form"],["string","Default"],["string","children"],["null",null]]},{"namespace":"Symfony\Component\Validator","short_class":"GraphWalker","class":"Symfony\Component\Validator\GraphWalker","type":"->","function":"walkObjectForGroup","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Validator\GraphWalker.php","line":85,"args":[["object","Symfony\Component\Validator\Mapping\ClassMetadata"],["object","Symfony\Component\Form\Form"],["string","Default"],["string",""]]},{"namespace":"Symfony\Component\Validator","short_class":"GraphWalker","class":"Symfony\Component\Validator\GraphWalker","type":"->","function":"walkObject","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Validator\Validator.php","line":64,"args":[["object","Symfony\Component\Validator\Mapping\ClassMetadata"],["object","Symfony\Component\Form\Form"],["string","Default"],["string",""]]},{"namespace":"Symfony\Component\Validator","short_class":"Validator","class":"Symfony\Component\Validator\Validator","type":"->","function":"Symfony\Component\Validator\{closure}","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Validator\Validator.php","line":138,"args":[["object","Symfony\Component\Validator\GraphWalker"],["string","Default"]]},{"namespace":"Symfony\Component\Validator","short_class":"Validator","class":"Symfony\Component\Validator\Validator","type":"->","function":"validateGraph","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Validator\Validator.php","line":67,"args":[["object","Symfony\Component\Form\Form"],["object","Closure"],["null",null]]},{"namespace":"Symfony\Component\Validator","short_class":"Validator","class":"Symfony\Component\Validator\Validator","type":"->","function":"validate","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Form\Extension\Validator\EventListener\ValidationListener.php","line":55,"args":[["object","Symfony\Component\Form\Form"]]},{"namespace":"Symfony\Component\Form\Extension\Validator\EventListener","short_class":"ValidationListener","class":"Symfony\Component\Form\Extension\Validator\EventListener\ValidationListener","type":"->","function":"validateForm","file":null,"line":null,"args":[["object","Symfony\Component\Form\FormEvent"]]},{"namespace":"","short_class":"","class":"","type":"","function":"call_user_func","file":"D:\Dev\wamp\www\cmf\app\cache\dev\classes.php","line":4781,"args":[["array",[["object","Symfony\Component\Form\Extension\Validator\EventListener\ValidationListener"],["string","validateForm"]]],["object","Symfony\Component\Form\FormEvent"]]},{"namespace":"Symfony\Component\EventDispatcher","short_class":"EventDispatcher","class":"Symfony\Component\EventDispatcher\EventDispatcher","type":"->","function":"doDispatch","file":"D:\Dev\wamp\www\cmf\app\cache\dev\classes.php","line":4695,"args":[["array",[["array",[["object","Symfony\Component\Form\Extension\Validator\EventListener\ValidationListener"],["string","validateForm"]]]]],["string","form.post_bind"],["object","Symfony\Component\Form\FormEvent"]]},{"namespace":"Symfony\Component\EventDispatcher","short_class":"EventDispatcher","class":"Symfony\Component\EventDispatcher\EventDispatcher","type":"->","function":"dispatch","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\EventDispatcher\ImmutableEventDispatcher.php","line":42,"args":[["string","form.post_bind"],["object","Symfony\Component\Form\FormEvent"]]},{"namespace":"Symfony\Component\EventDispatcher","short_class":"ImmutableEventDispatcher","class":"Symfony\Component\EventDispatcher\ImmutableEventDispatcher","type":"->","function":"dispatch","file":"D:\Dev\wamp\www\cmf\vendor\symfony\symfony\src\Symfony\Component\Form\Form.php","line":603,"args":[["string","form.post_bind"],["object","Symfony\Component\Form\FormEvent"]]},{"namespace":"Symfony\Component\Form","short_class":"Form","class":"Symfony\Component\Form\Form","type":"->","function":"bind","file":"D:\Dev\wamp\www\cmf\src\Cmf\UserBundle\Controller\UsersController.php","line":24,"args":[["array",{"current_password":["string","password"],"new":["array",{"first":["string","test1"],"second":["string","test1"]}]}]]},{"namespace":"Cmf\UserBundle\Controller","short_class":"UsersController","class":"Cmf\UserBundle\Controller\UsersController","type":"->","function":"processForm","file":"D:\Dev\wamp\www\cmf\src\Cmf\UserBundle\Controller\UsersController.php","line":138,"args":[["object","Cmf\UserBundle\Entity\User"],["object","Cmf\UserBundle\Form\ChangePasswordType"]]},{"namespace":"Cmf\UserBundle\Controller","short_class":"UsersController","class":"Cmf\UserBundle\Controller\UsersController","type":"->","function":"patchPasswordUserAction","file":null,"line":null,"args":[["string","2"]]},{"namespace":"","short_class":"","class":"","type":"","function":"call_user_func_array","file":"D:\Dev\wamp\www\cmf\app\bootstrap.php.cache","line":1419,"args":[["array",[["object","Cmf\UserBundle\Controller\UsersController"],["string","patchPasswordUserAction"]]],["array",[["string","2"]]]]},{"namespace":"Symfony\Component\HttpKernel","short_class":"HttpKernel","class":"Symfony\Component\HttpKernel\HttpKernel","type":"->","function":"handleRaw","file":"D:\Dev\wamp\www\cmf\app\bootstrap.php.cache","line":1383,"args":[["object","Symfony\Component\HttpFoundation\Request"],["string","1"]]},{"namespace":"Symfony\Component\HttpKernel","short_class":"HttpKernel","class":"Symfony\Component\HttpKernel\HttpKernel","type":"->","function":"handle","file":"D:\Dev\wamp\www\cmf\app\bootstrap.php.cache","line":1559,"args":[["object","Symfony\Component\HttpFoundation\Request"],["string","1"],["boolean",true]]},{"namespace":"Symfony\Bundle\FrameworkBundle","short_class":"HttpKernel","class":"Symfony\Bundle\FrameworkBundle\HttpKernel","type":"->","function":"handle","file":"D:\Dev\wamp\www\cmf\app\bootstrap.php.cache","line":610,"args":[["object","Symfony\Component\HttpFoundation\Request"],["string","1"],["boolean",true]]},{"namespace":"Symfony\Component\HttpKernel","short_class":"Kernel","class":"Symfony\Component\HttpKernel\Kernel","type":"->","function":"handle","file":"D:\Dev\wamp\www\cmf\web\app_dev.php","line":28,"args":[["object","Symfony\Component\HttpFoundation\Request"]]}]}]

Removing the 'constraints' => new UserPassword(), solves the issue, but then the validation is gone.

This is after doing composer update @ 2.1 release yesterday and a default config FOSUserBundle and FOSRestBundle.
      