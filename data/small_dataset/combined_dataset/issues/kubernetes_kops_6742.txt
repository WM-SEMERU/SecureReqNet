Cherry pick of #6740 onto release-1.12


Cherry pick of #6740
