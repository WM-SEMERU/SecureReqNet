Cherry pick of #6743 onto release-1.12


Cherry pick of #6743
